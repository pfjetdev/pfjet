# Top Routes - Personalized by Geolocation

–°–µ–∫—Ü–∏—è Top Routes —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üåç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è** - IPStack API –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞** - –ü–æ –∫–æ–¥—É —Å—Ç—Ä–∞–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
3. **–ü–æ–∫–∞–∑ –º–∞—Ä—à—Ä—É—Ç–æ–≤** - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è 10 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Supabase

## üìä –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã

### Europe (–ï–≤—Ä–æ–ø–∞)
- London ‚Üí Paris
- Paris ‚Üí Monaco
- Geneva ‚Üí Courchevel
- Nice ‚Üí Ibiza
- Milan ‚Üí Mykonos
- Zurich ‚Üí St. Moritz
- Rome ‚Üí Sardinia
- Barcelona ‚Üí Mallorca
- Moscow ‚Üí Dubai
- Vienna ‚Üí Salzburg

### Asia (–ê–∑–∏—è)
- Dubai ‚Üí Maldives
- Singapore ‚Üí Bali
- Hong Kong ‚Üí Tokyo
- Bangkok ‚Üí Phuket
- Mumbai ‚Üí Dubai
- Tokyo ‚Üí Seoul
- Shanghai ‚Üí Hong Kong
- Dubai ‚Üí Seychelles
- Singapore ‚Üí Maldives
- Doha ‚Üí Dubai

### North America (–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞)
- New York ‚Üí Miami
- Los Angeles ‚Üí Las Vegas
- Miami ‚Üí Bahamas
- New York ‚Üí Los Angeles
- Toronto ‚Üí New York
- Houston ‚Üí Cancun
- San Francisco ‚Üí Aspen
- Chicago ‚Üí Miami
- Los Angeles ‚Üí Cabo San Lucas
- Dallas ‚Üí Las Vegas

### South America (–Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞)
- S√£o Paulo ‚Üí Rio de Janeiro
- Buenos Aires ‚Üí Punta del Este
- Lima ‚Üí Cusco
- Bogot√° ‚Üí Cartagena
- Santiago ‚Üí Mendoza
- Rio de Janeiro ‚Üí Florian√≥polis
- Buenos Aires ‚Üí Bariloche
- S√£o Paulo ‚Üí Miami
- Quito ‚Üí Gal√°pagos
- Caracas ‚Üí Aruba

### Africa (–ê—Ñ—Ä–∏–∫–∞)
- Johannesburg ‚Üí Cape Town
- Dubai ‚Üí Nairobi
- Cairo ‚Üí Sharm El Sheikh
- Nairobi ‚Üí Zanzibar
- Marrakech ‚Üí Casablanca
- Lagos ‚Üí Accra
- Addis Ababa ‚Üí Nairobi
- Cape Town ‚Üí Mauritius
- Johannesburg ‚Üí Victoria Falls
- Casablanca ‚Üí Marrakech

### Oceania (–û–∫–µ–∞–Ω–∏—è)
- Sydney ‚Üí Melbourne
- Auckland ‚Üí Queenstown
- Perth ‚Üí Bali
- Brisbane ‚Üí Gold Coast
- Sydney ‚Üí Fiji
- Melbourne ‚Üí Tasmania
- Auckland ‚Üí Sydney
- Cairns ‚Üí Great Barrier Reef
- Sydney ‚Üí Bali
- Wellington ‚Üí Auckland

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§–∞–π–ª—ã

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ TopRoutesSection.tsx       # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ topRoutes.ts               # –î–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–º
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ continents.ts              # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ topRoutesGenerator.ts     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ geolocation.ts             # IPStack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞

```typescript
// src/lib/continents.ts
export function getContinentByCountryCode(countryCode: string): Continent {
  // –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –Ω–∞ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
  // –ù–∞–ø—Ä–∏–º–µ—Ä: 'FR' ‚Üí 'Europe', 'US' ‚Üí 'North America'
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

```typescript
// src/lib/topRoutesGenerator.ts
export async function getTopRoutesWithImages(
  continent: Continent,
  userCity?: string
): Promise<TopRouteWithImage[]> {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞
  // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ Supabase
  // 3. –í–µ—Ä–Ω—É—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
}
```

## üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç TopRoutesSection

### –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Server Component)

```tsx
export default async function TopRoutesSection() {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const geolocation = await getSimpleGeolocation();

  // 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
  const continent = geolocation
    ? getContinentByCountryCode(geolocation.countryCode)
    : 'Europe';

  // 3. –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
  const routes = await getTopRoutesWithImages(continent, geolocation?.city);

  // 4. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
  return (...)
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **Server Component** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–µ—Ç JS –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫** - "Top Routes from Paris"
- ‚úÖ **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ Supabase** - —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≥–æ—Ä–æ–¥–æ–≤
- ‚úÖ **Fallback** - –µ—Å–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ï–≤—Ä–æ–ø—É
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - batch-–∑–∞–ø—Ä–æ—Å –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
User Request
    ‚Üì
TopRoutesSection (Server Component)
    ‚Üì
IPStack API ‚Üí –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
getContinentByCountryCode ‚Üí –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
    ‚Üì
getTopRoutesWithImages ‚Üí –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
    ‚Üì
Supabase ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤
    ‚Üì
Render ‚Üí –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å 10 –∫–∞—Ä—Ç–æ—á–µ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
```

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í page.tsx

```tsx
import TopRoutesSection from '@/components/TopRoutesSection';

export default function Home() {
  return (
    <div>
      <TopRoutesSection />
    </div>
  );
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ **Paris, France**:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç: **Europe**
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "Top Routes from Paris"
- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –∏–∑ Paris

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ **New York, USA**:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç: **North America**
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–µ–≤–µ—Ä–æ–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "Top Routes from New York"
- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –∏–∑ New York

## üé® –î–∏–∑–∞–π–Ω

- **–°–µ—Ç–∫–∞**: 2 –∫–æ–ª–æ–Ω–∫–∏ (mobile) ‚Üí 3 (tablet) ‚Üí 5 (desktop)
- **–ö–∞—Ä—Ç–æ—á–∫–∏**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ + overlay + —Ç–µ–∫—Å—Ç
- **Hover —ç—Ñ—Ñ–µ–∫—Ç**: Scale + –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ overlay
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è mobile/desktop

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **Server-side rendering** - HTML –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **Batch fetching** - –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤
3. **Image optimization** - Next.js Image component
4. **Caching** - IPStack responses –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å
5. **Fallback images** - `/day.jpg` –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –ú–∞—Ä—à—Ä—É—Ç—ã —Å—Ç–∞—Ç–∏—á–Ω—ã–µ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `topRoutes.ts`)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ (–∏–∑ Supabase)
- –ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –≥–æ—Ä–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ï—Å–ª–∏ IPStack –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ï–≤—Ä–æ–ø–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –í—Å–µ —Ü–µ–Ω—ã –≤ USD

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ `src/data/topRoutes.ts`
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
3. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç:

```typescript
{
  id: 'eur-11',
  fromCity: 'Amsterdam',
  toCity: 'London',
  price: 8900
}
```

4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≥–æ—Ä–æ–¥–∞ –µ—Å—Ç—å –≤ Supabase —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

## üêõ Troubleshooting

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥–æ—Ä–æ–¥–∞ –µ—Å—Ç—å –≤ Supabase —Ç–∞–±–ª–∏—Ü–µ `cities`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `image` —É –≥–æ—Ä–æ–¥–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ï–≤—Ä–æ–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IPStack API –∫–ª—é—á –≤ `.env.local`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –æ—à–∏–±–æ–∫ IPStack

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –≤ `src/lib/continents.ts`
- –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
